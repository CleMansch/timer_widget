<!DOCTYPE html>
  <head>
    <title>JQuery Timer</title>
    <link rel="icon" type="image/x-icon" href="./assets/favicon.ico" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script> 
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="/resources/demos/style.css">
  <script>
  $( function() {
    $( "#draggable" ).draggable();
  } );
  $( function() {
    $( ".widget input[type=submit], .widget a, .widget button" ).button();
    $( "button, a" ).click( function( event ) {
      event.preventDefault();
    } );
  } );
  $( function() {
    $( "#draggable" ).resizable();
  } );
  </script>
  <!-- css -->
    <style>
        body{
        background-color:black;
        font-family: "roboto", sans-serif;
        margin: 0;
    }
    #draggable{
      border-radius: 25px;
background-color:#2D882D;
width: 15em;
min-width: 15em;
padding:0.5em;
height: 10em;
min-height: 10.5em;
    }
#classroomwidget{
width: 50%;
}
#dragCont{
  text-align: center;
  position: relative;
  top:30%;
  margin-top: -3em;

}

    #tminusBig{
      /* display: flex;
      flex-wrap: wrap; */
      height: 5.5em;
      margin-top: -2em;
      margin-bottom: -2em;

    }
    .incr{
      padding-left: 0.5em;
      padding-right: 0.5em;

    height: 1em;
    width: 2.05em;
    }
    .decr{
      padding-left: 0.5em;
      padding-right: 0.5em;

    height: 1em;
    width: 2.05em;
    }
    h1 {
  letter-spacing: 2px;
  font-size: 3.1em;
  padding-left: 1px;
}
.ui-button {
  height: 2em;
  padding-bottom: 1.75em;
  border-radius: 25px;
}
svg {
  margin-left: -0.25em;

}
#checki{
  display:none;
}
    </style>
  </head>
<!-- start widget -->
<div id="draggable">
  <div id="dragCont">
  <!-- increment buttons -->
    <div class="crementor widget"><button id="incr1" class="incr">    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M13 2v9h9v2h-9v9h-2v-9h-9v-2h9v-9h2zm2-2h-6v9h-9v6h9v9h6v-9h9v-6h-9v-9z"/></svg></button><button id="incr2" class="incr">    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M13 2v9h9v2h-9v9h-2v-9h-9v-2h9v-9h2zm2-2h-6v9h-9v6h9v9h6v-9h9v-6h-9v-9z"/></svg></button><button id="incr3" class="incr">    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M13 2v9h9v2h-9v9h-2v-9h-9v-2h9v-9h2zm2-2h-6v9h-9v6h9v9h6v-9h9v-6h-9v-9z"/></svg></button><button id="incr4" class="incr">    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M13 2v9h9v2h-9v9h-2v-9h-9v-2h9v-9h2zm2-2h-6v9h-9v6h9v9h6v-9h9v-6h-9v-9z"/></svg></button></div>
<!-- big counter -->
    <div id="tminusBig">
      <h1 id="bigtitle">00:00 </h1>
    </div>
<!-- decrement buttons -->
      <div class="crementor widget"><button id="decr1" class="decr"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6 13h-12v-2h12v2z"/></svg></button><button id="decr2" class="decr"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6 13h-12v-2h12v2z"/></svg></button><button id="decr3" class="decr"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6 13h-12v-2h12v2z"/></svg></button><button id="decr4" class="decr"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6 13h-12v-2h12v2z"/></svg></button>
      </div>
<!-- function buttons -->
<div class="widget">
          <button id="bStart"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm-3 17v-10l9 5.146-9 4.854z"/></svg></button>
          <button id="bPause"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M11 22h-4v-20h4v20zm6-20h-4v20h4v-20z"/></svg></button>
          <button id="bStopp"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M2 2h20v20h-20z"/></svg></button>
          <button id="bMute"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M3 9v6h-1v-6h1zm13-7l-9 5v2.288l7-3.889v13.202l-7-3.889v2.288l9 5v-20zm-11 5h-5v10h5v-10zm17.324 4.993l1.646-1.659-1.324-1.324-1.651 1.67-1.665-1.648-1.316 1.318 1.67 1.657-1.65 1.669 1.318 1.317 1.658-1.672 1.666 1.653 1.324-1.325-1.676-1.656z"/></svg></button>
</div>
<!-- should be replaced with a variable -->
          <input id="checki" type="checkbox" style="width:20px;" value="1" name="checkbox" class="checkbox_check">
</div>
</div>
<!-- jquery -->
    <script>
$(document).ready(function(){
  var toggler = 0;

// soundlibrary
  var audio = new Audio('timeout.mp3');
//quickfix for checkbox
$("#checki").prop("checked", false);

  // Get totalAmount from localStorage and if there is positive value call timeSet() immediately
    var totalAmount = localStorage.getItem('countDown') || 0,
    timeloop;
    if (totalAmount) {
    timeSet();
}
// heart of the operation
function timeSet () {
    totalAmount--;
    // Refresh value in localStorage
    localStorage.setItem('countDown', totalAmount);
//colouranimation on totalAmount
var state = true;
      if ( totalAmount <=60 && totalAmount >=1) {
        $( "#draggable" ).animate({
          backgroundColor: "#aa0000",
          color: "black",
        }, 1000 );
      } else {
        $( "#draggable" ).animate({
          backgroundColor: "#2D882D",
          color: "#000"
        }, 1000 );
      state = !state;}
     // If countdown is over, then remove value from storage and clear timeout
     if (totalAmount < 0 ) {
         localStorage.removeItem('countDown');
          totalAmount = 0;
         clearTimeout(timeloop);
        $('#bigtitle').text("00:00");
         return;
     }
// little bit of funk at 0
  if ( totalAmount == 0 ) {{
        $( "#draggable" ).animate({
          backgroundColor: "#AAA539",
          color: "#000",
        }, 1000 );}}
//play Sound on checkbox
  if (totalAmount == 0 && $('input.checkbox_check').prop('checked')) {
        audio.play();
     }
//"engine"
    var minutes = parseInt(totalAmount/60);
    var seconds = parseInt(totalAmount%60);

    if(seconds < 10)
        seconds = "0"+seconds;

        if(minutes < 10)
        minutes = "0"+minutes;

    $('#bigtitle').text(minutes + ":" + seconds);
    clearTimeout(timeloop);
    timeloop = setTimeout(timeSet, 1000);
}
// buttonfunction without timeloop
function timeStill () {
    totalAmount--;
    // Refresh value in localStorage
    localStorage.setItem('countDown', totalAmount);
//colouranimation on totalAmount
var state = true;
      if ( totalAmount <=60 && totalAmount >=1) {
        $( "#draggable" ).animate({
          backgroundColor: "#aa0000",
          color: "black",
        }, 1000 );
      } else {
        $( "#draggable" ).animate({
          backgroundColor: "#2D882D",
          color: "#000"
        }, 1000 );
      state = !state;}
     // If countdown is over, then remove value from storage and clear timeout
     if (totalAmount < 0 ) {
         localStorage.removeItem('countDown');
          totalAmount = 0;
         clearTimeout(timeloop);
        $('#bigtitle').text("00:00");
         return;
     }
// little bit of funk at 0
  if ( totalAmount == 0 ) {{
        $( "#draggable" ).animate({
          backgroundColor: "#AAA539",
          color: "#000",
        }, 1000 );}}
//play Sound on checkbox
  if (totalAmount == 0 && $('input.checkbox_check').prop('checked')) {
        audio.play();
     }
//"engine"
    var minutes = parseInt(totalAmount/60);
    var seconds = parseInt(totalAmount%60);

    if(seconds < 10)
        seconds = "0"+seconds;

        if(minutes < 10)
        minutes = "0"+minutes;

    $('#bigtitle').text(minutes + ":" + seconds);
    clearTimeout(timeloop);

}
//all the buttons, first increment, then decrement, then functional
$("#incr1").click(function() {
  totalAmount+=601;
  timeStill();
});
$("#incr2").click(function() {
    totalAmount+=61;
  timeStill();
});
$("#incr3").click(function() {
    totalAmount+=11;
  timeStill();
});
$("#incr4").click(function() {
    totalAmount+=2;
    timeStill();
    
});
$("#decr1").click(function() {
  totalAmount-=599;
  timeStill();
});
$("#decr2").click(function() {
    totalAmount-=59;
  timeStill();
});
$("#decr3").click(function() {
    totalAmount-=9;
  timeStill();
});
$("#decr4").click(function() {
  timeStill();
});
$("#bStart").click(function() {
  totalAmount++;
    timeSet();
});
$("#bPause").click(function() {
  clearTimeout(timeloop);
});
$("#bStopp").click(function() {
    clearTimeout(timeloop);
    totalAmount=0;
    $('#bigtitle').text("00:00");
});
$("#bMute").click(function() {

  // $('input[type=checkbox]').click(); 
toggler ++;
//all uneven
if (toggler%2){
  $("#bMute").html('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M5 17h-5v-10h5v10zm2-10v10l9 5v-20l-9 5zm17 4h-5v2h5v-2zm-1.584-6.232l-4.332 2.5 1 1.732 4.332-2.5-1-1.732zm1 12.732l-4.332-2.5-1 1.732 4.332 2.5 1-1.732z"/></svg>');
  $("#checki").prop("checked", true);
}
else{
  $("#bMute").html('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M3 9v6h-1v-6h1zm13-7l-9 5v2.288l7-3.889v13.202l-7-3.889v2.288l9 5v-20zm-11 5h-5v10h5v-10zm17.324 4.993l1.646-1.659-1.324-1.324-1.651 1.67-1.665-1.648-1.316 1.318 1.67 1.657-1.65 1.669 1.318 1.317 1.658-1.672 1.666 1.653 1.324-1.325-1.676-1.656z"/></svg>');
  $("#checki").prop("checked", false);
}





});
});
    </script>
    </div>
  </body>

</html>